LIST P = 16F887
INCLUDE <P16F887.INC>
__CONFIG _CONFIG1,0XE032
__CONFIG _CONFIG2,0XFEFF
CBLOCK 0X20
    CONTA
    CONTB
    CONTC
    D1
    D2
    D3
    D4
 ENDC
 ORG 0X00
 ;----------------- CONFIGURACION REGISTRO --------------
 INICIA 
    BANKSEL  ANSEL
    CLRF     ANSEL
    CLRF     ANSELH

    BANKSEL TRISC
    MOVLW H'FF'
    MOVWF TRISC
    
    BANKSEL TRISC
    MOVLW H'00'
    MOVWF TRISC

    BANKSEL TRISD
    MOVLW H'00'
    MOVWF TRISD
    
    BANKSEL PORTB
    BANKSEL PORTC
    BANKSEL PORTD
;------------------COMIENZO DE MIS INSTRUCCIONES----------------
MAIN
    MOVLW H'FF'
    MOVWF CONTA
    MOVLW H'FF'
    MOVWF CONTB
    MOVLW H'FF'
    MOVWF CONTC

    BTFSS PORTB, 0
    GOTO $-1

FOR1_PLUMA

    CALL ENCLEDROJ

    MOVLW H'00'
    MOVWF PORTD
    CALL RET_0_8S

    MOVLW H'11'
    MOVWF PORTD
    CALL RET_0_8S
    DECFSZ CONTA

GOTO FOR1_PLUMA

    BTFSS PORTB, 1
    GOTO $-1

FOR1_PUENTE
    CALL ENCLEDROJ

    MOVLW H'00'
    MOVWF PORTD
    CALL RET_1_6S

    MOVLW H'11'
    MOVWF PORTD
    CALL RET_1_6S
    DECFSZ CONTB

GOTO FOR1_PUENTE

    MOVLW H'FF'
    MOVWF CONTA
    MOVLW H'FF'
    MOVWF CONTB
    MOVLW H'FF'
    MOVWF CONTC

    BTFSS PORTB, 2
    GOTO $-1

FOR2_PLUMA

    CALL ENCLEDVER

    MOVLW H'00'
    MOVWF PORTD
    CALL RET_0_8S

    MOVLW H'11'
    MOVWF PORTD
    CALL RET_0_8S
    DECFSZ CONTA

GOTO FOR2_PLUMA

    BTFSS PORTB, 3
    GOTO $-1

FOR2_PUENTE
    CALL ENCLEDVER

    MOVLW H'00'
    MOVWF PORTD
    CALL RET_1_6S

    MOVLW H'11'
    MOVWF PORTD
    CALL RET_1_6S
    DECFSZ CONTB

GOTO FOR2_PUENTE

GOTO MAIN

ENCLEDVER
    MOVLW H'00'
    MOVWF PORTC
RETURN

ENCLEDROJ
    MOVLW H'33'
    MOVWF PORTC
RETURN

END
